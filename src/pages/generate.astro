---
import AuthLayout from '../layouts/AuthLayout.astro';
import GenerateFlashcardsView from '../components/views/GenerateFlashcardsView';

export const prerender = false;

// Sprawdź czy użytkownik jest zalogowany (middleware powinien przekierować, ale double-check)
const { user } = Astro.locals;

if (!user) {
  return Astro.redirect('/login');
}
---

<AuthLayout title="Generuj fiszki z AI">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8">
      <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Generuj fiszki z AI</h1>
      <button 
        class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors w-full sm:w-auto shrink-0"
        onclick="window.location.href = '/dashboard'"
      >
        ← Powrót na pulpit
      </button>
    </div>
    <GenerateFlashcardsView client:load userId={user.id} />
  </div>
</AuthLayout>