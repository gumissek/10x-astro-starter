---
import AuthLayout from "../layouts/AuthLayout.astro";
import DashboardView from "../components/views/DashboardView";

export const prerender = false;

// Sprawdź czy użytkownik jest zalogowany (middleware powinien przekierować, ale double-check)
const { user } = Astro.locals;

if (!user) {
  return Astro.redirect("/login");
}
---

<AuthLayout title="Dashboard - Twoje foldery">
  <DashboardView client:load userId={user.id} data-testid="dashboard-page" />
</AuthLayout>
